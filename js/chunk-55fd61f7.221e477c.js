(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55fd61f7"],{"294d":function(t,e,r){"use strict";r("adbb")},"4ae0":function(t,e,r){"use strict";r("6663")},"4f4e":function(t,e,r){},6663:function(t,e,r){},"842b":function(t,e,r){"use strict";r("4f4e")},"92b0":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user"},[e("Navbar"),e("CartNavbar"),e("div",{staticClass:"user-cover",on:{click:t.controlCartModel}},[e("img",{staticClass:"user-cover-title",attrs:{src:r("f271")}}),e("img",{staticClass:"user-cover-img",attrs:{src:r("7b73")}})]),e("div",{staticClass:"user-content",on:{click:t.controlCartModel}},[e("div",{staticClass:"user-content-nav"},[e("UserNavbar",{on:{detailPageFilter:t.productFilter}})],1),e("div",{staticClass:"user-content-items"},[t.isProcessing?e("OrderDetailSpiner"):t._e(),t.isProcessing?t._e():e("OrderDetail",{attrs:{order:t.order}})],1)])],1)},c=[],o=(r("14d9"),r("d178")),i=r("bd13"),a=r("d839"),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkout-product-content"},[e("div",{staticClass:"checkout-product-content-top"},[e("h4",[t._v("訂單日期："+t._s(t._f("newTime")(t.order.createdAt)))]),e("h4",[t._v(" 出貨狀況："+t._s("1"===t.order.shipping_status?"已出貨":"未出貨")+" ")])]),e("div",{staticClass:"checkout-product-content-left"},[e("div",{staticClass:"checkout-product-content-left-title"},[e("h2",[t._v("訂單資訊")]),e("h4",[t._v("訂單編號："+t._s(t.order.id))])]),e("div",{staticClass:"checkout-product-content-left-content"},[e("div",{staticClass:"checkout-product-content-left-content-products"},[t._m(0),t._l(t.order.items,(function(r){return e("div",{key:r.id,staticClass:"checkout-product-content-left-content-product"},[e("router-link",{staticClass:"product-image",attrs:{to:{name:"Product-Detail",params:{id:r.id}}}},[e("img",{attrs:{src:r.image}})]),e("router-link",{staticClass:"product-name",attrs:{to:{name:"Product-Detail",params:{id:r.id}}}},[e("h3",[t._v(t._s(r.name))])]),e("div",{staticClass:"product-number"},[t._v(" "+t._s(r.OrderItem.quantity)+" 箱 ")]),e("div",{staticClass:"product-price"},[t._v(t._s(r.price)+" 元")]),e("div",{staticClass:"product-totle"},[t._v(t._s(r.OrderItem.price)+" 元")])],1)})),e("div",{staticClass:"checkout-product-content-left-content-totlePrice"},[e("h4",[t._v("小計："+t._s(t.order.amount-t.order.shipping_fee)+"元")]),e("h4",[t._v("運費："+t._s(t.order.shipping_fee)+"元")]),e("h3",[t._v("總計："+t._s(t.order.amount)+"元")])])],2)]),e("h2",{staticClass:"title-2"},[t._v("寄送資訊")]),e("div",{staticClass:"checkout-product-content-left-content"},[e("div",{staticClass:"checkout-product-content-left-content-orderInfo"},[e("h3",[t._v("訂購人資料")]),e("div",[t._v("姓名："+t._s(t.order.customerName))]),e("div",[t._v("電話："+t._s(t.order.customerPhone))]),e("div",[t._v("Email："+t._s(t.order.customerEmail))])]),e("div",{staticClass:"checkout-product-content-left-content-recieverInfo"},[e("h3",[t._v("收件人資料")]),e("div",[t._v("姓名："+t._s(t.order.recipientName))]),e("div",[t._v("電話："+t._s(t.order.recipientPhone))]),e("div",[t._v("地址："+t._s(t.order.recipientAddress))]),e("div",[t._v("Email："+t._s(t.order.recipientEmail))])])])]),e("div",{staticClass:"checkout-product-content-button"},[e("button",{staticClass:"checkout-product-content-button-previous",on:{click:t.previous}},[t._v(" 返回列表 ")]),"0"===t.order.payment_status?e("button",{staticClass:"checkout-product-content-button-next",on:{click:t.nextToPay}},[t._v(" 前往付款 ")]):t._e(),"0"===t.order.payment_status?e("button",{staticClass:"checkout-product-content-button-delete",on:{click:t.deleteOrder}},[t._v(" 取消訂單 ")]):t._e()])])},d=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkout-product-content-left-content-title"},[e("div",{staticClass:"product-image"}),e("div",{staticClass:"product-name"},[t._v("名稱")]),e("div",{staticClass:"product-number"},[t._v("數量")]),e("div",{staticClass:"product-price"},[t._v("單價")]),e("div",{staticClass:"product-totle"},[t._v("小計")])])}],u=(r("d9e2"),r("2f62")),l=r("9b2a"),p=r("3d20"),v=r.n(p),h=r("c1df"),m=r.n(h),f={name:"Order-Detail",components:{},data(){return{}},props:{order:{required:!0}},filters:{newTime(t){return m()(t).format("YYYY-MM-DD -  a h:mm")}},methods:{previous(){this.$router.push({name:"User-Order"})},nextToPay(){localStorage.setItem("go_farmmy_orderId",this.order.id),this.$router.push({name:"CheckOut-Payment"})},async cancelOrder(){try{const t=await l["a"].deleteOrder({Id:this.order.id});if("OK"!==t.statusText)throw new Error(t.statusText);this.$router.push({name:"User-Order"})}catch(t){console.log(t),v.a.fire({icon:"error",title:"刪除失敗，請稍後再試",toast:!0,showConfirmButton:!1,timer:1500})}},async deleteOrder(){try{const t=await v.a.fire({title:"確定取消訂單",text:"訂單取消後將會從訂單列表中移除",icon:"warning",focusCancel:!0,showCancelButton:!0,confirmButtonColor:"#808080",cancelButtonColor:"#2a2a2a",cancelButtonText:"取消",confirmButtonText:"確認"});if(!t.isConfirmed)return;this.cancelOrder()}catch(t){console.log(t)}}},mounted(){},created(){},computed:{...Object(u["b"])(["isAuthenticated","cart"])},beforeDestroy(){localStorage.removeItem("go_farmmy_orderId"),this.$store.commit("changeCheckOutStep",0)}},C=f,_=(r("842b"),r("2877")),k=Object(_["a"])(C,n,d,!1,null,"12220f29",null),b=k.exports,g=function(){var t=this;t._self._c;return t._m(0)},O=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkout-product-spiner"},[e("div",{staticClass:"checkout-product-spiner-top"},[e("h4",[e("div")]),e("h4",[e("div")])]),e("div",{staticClass:"checkout-product-spiner-left"},[e("div",{staticClass:"checkout-product-spiner-left-title"},[e("div")]),e("div",{staticClass:"checkout-product-spiner-left-content"},[e("div",{staticClass:"checkout-product-spiner-left-content-products"},[e("div",{staticClass:"checkout-product-spiner-left-content-title"},[e("div",{staticClass:"product-image"},[e("div")]),e("div",{staticClass:"product-name"},[e("div")]),e("div",{staticClass:"product-number"},[e("div")]),e("div",{staticClass:"product-price"},[e("div")]),e("div",{staticClass:"product-totle"},[e("div")])]),e("div",{staticClass:"checkout-product-spiner-left-content-product"},[e("div",{staticClass:"product-image"},[e("div")]),e("div",{staticClass:"product-name"}),e("div",{staticClass:"product-number"}),e("div",{staticClass:"product-price"}),e("div",{staticClass:"product-totle"})]),e("div",{staticClass:"checkout-product-spiner-left-content-totlePrice"},[e("h4",[e("div")])])])]),e("h2",{staticClass:"title-2"},[e("div")]),e("div",{staticClass:"checkout-product-spiner-left-content"},[e("div",{staticClass:"checkout-product-spiner-left-content-orderInfo"},[e("div")]),e("div",{staticClass:"checkout-product-spiner-left-content-recieverInfo"},[e("div")])])])])}],y=(r("4ae0"),{}),P=Object(_["a"])(y,g,O,!1,null,"0cdecc2c",null),w=P.exports,I={name:"Member",components:{Navbar:o["a"],UserNavbar:a["a"],OrderDetail:b,CartNavbar:i["a"],OrderDetailSpiner:w},data(){return{order:{},filterName:"",isProcessing:!0}},methods:{productFilter(){this.$router.push({name:"Product"})},controlCartModel(){this.$store.commit("closeCartModel")},async fetchData(t){try{const e=await l["a"].getOrder({Id:t});this.order=e.data.order,this.isProcessing=!1}catch(e){console.log(e),v.a.fire({icon:"warning",title:"訂單載入失敗，請稍後再試 ",toast:!0,showConfirmButton:!1,timer:2e3})}}},created(){const{id:t}=this.$route.params;this.fetchData(t)}},D=I,N=(r("294d"),Object(_["a"])(D,s,c,!1,null,"5c399b5f",null));e["default"]=N.exports},"9b2a":function(t,e,r){"use strict";var s=r("2fa3"),c=r("bc3a"),o=r.n(c);const i=()=>localStorage.getItem("gofarmmy_token");e["a"]={postOrder({customerName:t,customerEmail:e,customerPhone:r,recipientEmail:c,recipientName:o,recipientAddress:a,recipientPhone:n}){return s["a"].post("/orders",{customerName:t,customerEmail:e,customerPhone:r,recipientEmail:c,recipientName:o,recipientAddress:a,recipientPhone:n},{headers:{Authorization:"Bearer "+i()}})},getPayment({Id:t}){return s["a"].get(`/orders/${t}/payment`,{headers:{Authorization:"Bearer "+i()}})},getOrder({Id:t}){return s["a"].get("/orders/"+t,{headers:{Authorization:"Bearer "+i()}})},PostSpgatewayCb({MerchantID:t,TradeInfo:e,TradeSha:r,Version:s}){return o.a.post("https://go-farmmy-demo.herokuapp.com/spgateway/callback",{MerchantID:t,TradeInfo:e,TradeSha:r,Version:s},{headers:{Authorization:"Bearer "+i()}})},deleteOrder({Id:t}){return s["a"].delete("/orders/"+t,{headers:{Authorization:"Bearer "+i()}})}}},adbb:function(t,e,r){}}]);
//# sourceMappingURL=chunk-55fd61f7.221e477c.js.map