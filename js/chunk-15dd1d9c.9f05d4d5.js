(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15dd1d9c"],{1235:function(t,s,n){"use strict";n("e746")},1513:function(t,s,n){"use strict";n("1fb6")},1762:function(t,s,n){t.exports=n.p+"img/home-nav-icon-07.5bd3c2ec.png"},"1fb6":function(t,s,n){},"34c3":function(t,s,n){"use strict";n.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"signin"},[t.signinProcessing?s("SigninSpiner"):t._e(),s("Navbar"),s("CartNavbar"),s("div",{staticClass:"signin-cover",on:{click:t.controlCartModel}},[s("img",{staticClass:"signin-cover-title",attrs:{src:n("f0d3")}}),s("img",{staticClass:"signin-cover-img",attrs:{src:n("7b73")}})]),s("SignupForm")],1)},o=[],a=n("d178"),e=n("bd13"),r=function(){var t=this,s=t._self._c;return s("div",{ref:"controlScroll",staticClass:"signin-form",on:{"!scroll":function(s){return t.scrollChange.apply(null,arguments)},click:t.controlCartModel}},[t._m(0),t._m(1),s("form",{staticClass:"form"},[s("h2",[t._v("註冊")]),s("div",{staticClass:"signin-form-content"},[s("div",{staticClass:"signin-form-content-fast"},[s("h3",[t._v("快速登入")]),s("h5",[t._v("您可以透過Facebook和Google免註冊登入")]),s("div",{staticClass:"signin-form-content-fast-icon"},[s("div",{staticClass:"fab"},[s("GoogleSignInButton",{on:{"sign-in":t.oAuthSignIn}})],1),s("i",{staticClass:"fab fa-facebook-f",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.fbLogin.apply(null,arguments)}}})])]),t._m(2),s("div",{staticClass:"signin-form-content-name"},[t._m(3),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"signin-form-content-name-input",attrs:{id:"name",type:"name",autofocus:"",required:""},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})]),s("div",{staticClass:"signin-form-content-email"},[t._m(4),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"signin-form-content-email-input",attrs:{placeholder:"請含有@、com等字元",id:"email",type:"email",required:""},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value)}}})]),s("div",{staticClass:"signin-form-content-password"},[t._m(5),"checkbox"===t.showPassword?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"signin-form-content-password-input",attrs:{id:"password",autofocus:"",required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(s){var n=t.password,i=s.target,o=!!i.checked;if(Array.isArray(n)){var a=null,e=t._i(n,a);i.checked?e<0&&(t.password=n.concat([a])):e>-1&&(t.password=n.slice(0,e).concat(n.slice(e+1)))}else t.password=o}}}):"radio"===t.showPassword?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"signin-form-content-password-input",attrs:{id:"password",autofocus:"",required:"",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(s){t.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"signin-form-content-password-input",attrs:{id:"password",autofocus:"",required:"",type:t.showPassword},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),s("div",{staticClass:"signin-form-content-password-eye"},[t.showPassword?s("i",{staticClass:"fas fa-eye-slash",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.clickShowPassword.apply(null,arguments)}}}):s("i",{staticClass:"fas fa-eye",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.clickHidePassword.apply(null,arguments)}}})])]),s("div",{staticClass:"signin-form-content-checkPassword"},[t._m(6),s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],staticClass:"signin-form-content-checkPassword-input",attrs:{id:"checkPassword",type:"password",autofocus:"",required:""},domProps:{value:t.checkPassword},on:{input:function(s){s.target.composing||(t.checkPassword=s.target.value)}}})]),s("div",{staticClass:"signin-form-content-buttonarea"},[s("div",{staticClass:"signin-form-content-signin",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.signIn.apply(null,arguments)}}},[s("h3",[t._v("返回登入")])]),t.processing?s("div",{staticClass:"signin-form-content-button block"},[s("h3",[t._v("註冊中...")])]):s("div",{staticClass:"signin-form-content-button",class:{block:!t.email||!t.password||!t.name||!t.checkPassword},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.signUp.apply(null,arguments)}}},[s("h3",[t._v("註冊")])])])])])])},c=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"signin-form-img-1"},[s("img",{attrs:{src:n("aa4e")}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"signin-form-img-2"},[s("img",{attrs:{src:n("a92a")}})])},function(){var t=this,s=t._self._c;return s("div",[s("h3",[t._v("會員註冊")])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"signin-form-content-name-lebel",attrs:{for:"name"}},[s("h3",[t._v("姓名")])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"signin-form-content-email-lebel",attrs:{for:"email"}},[s("h3",[t._v("Email")])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"signin-form-content-password-lebel",attrs:{for:"password"}},[s("h3",[t._v("密碼")])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"signin-form-content-checkPassword-lebel",attrs:{for:"checkPassword"}},[s("h3",[t._v("密碼確認")])])}],l=(n("d9e2"),n("14d9"),n("4cce")),u=n("3d20"),d=n.n(u),m=n("4360"),h=n("ab0b"),p=n("2f62"),g={components:{GoogleSignInButton:h["a"]},data(){return{showPassword:"password",email:"",password:"",name:"",checkPassword:"",processing:!1,googleToken:""}},methods:{async oAuthSignIn(t){this.$store.commit("isSigninProcessing"),this.googleToken=t;try{console.log("丟去後端");const t=await l["a"].PostGoogleSignIn({token:this.googleToken}),{data:s}=t;if("success"!==s.status)throw new Error(s.message);console.log(t),d.a.fire({icon:"success",title:`歡迎 ${s.user.name}回來！`,toast:!0,showConfirmButton:!1,timer:3e3}),localStorage.setItem("gofarmmy_token",s.JWTtoken),this.$store.commit("setCurrentUser",s.user),this.$store.commit("notSigninProcessing"),this.$router.push({name:"Home"})}catch(s){console.error(s),this.$store.commit("notSigninProcessing"),d.a.fire({icon:"error",title:"登入錯誤，請洽客服",toast:!0,showConfirmButton:!1,timer:1500})}},async signUp(){this.$store.commit("closeCartModel");const t=await this.$store.dispatch("checkEmptyInput",[this.email,this.name,this.password,this.checkPassword]);if(t)return;const s=await this.$store.dispatch("checkEmail",this.email);if(s)return;const n=await this.$store.dispatch("checkPassword",{password:this.password,checkPassword:this.checkPassword});if(!n)try{this.$store.commit("isSigninProcessing");const t=await l["a"].PostSignUp({name:this.name,email:this.email,password:this.password,checkPassword:this.checkPassword}),{data:s}=t;if("success"!==s.status)throw new Error(s.message);d.a.fire({icon:"success",title:"歡迎加入Go Farmmy！",toast:!0,showConfirmButton:!1,timer:2e3}),this.$store.commit("notSigninProcessing"),this.$router.push({name:"Sign-in"})}catch(i){this.processing=!1,this.password="",this.checkPassword="",this.$store.commit("notSigninProcessing"),"This email has been registered"===i.message?d.a.fire({icon:"warning",title:"email已重複註冊",toast:!0,showConfirmButton:!1,timer:2e3}):d.a.fire({icon:"error",title:"註冊失敗，請聯繫客服",toast:!0,showConfirmButton:!1,timer:2e3})}},signIn(){this.$router.push({name:"Sign-in"})},controlCartModel(){this.$store.commit("closeCartModel")},clickShowPassword(){this.showPassword=""},clickHidePassword(){this.showPassword="password"},getFacebookStatus(){window.FB.getLoginStatus(t=>{"connected"===t.status&&(console.log("已連接",t),m["a"].commit("changeFacebookConnect"))})},fbLogin(){this.$store.commit("isSigninProcessing"),this.facebookConnect?window.FB.api("/me",{fields:"name,email"},(async function(t){await m["a"].dispatch("fetchFbUser",t),m["a"].commit("notSigninProcessing")})):window.FB.login((function(t){"connected"===t.status?window.FB.api("/me",{fields:"name,email"},(async function(t){await m["a"].dispatch("fetchFbUser",t),m["a"].commit("notSigninProcessing")})):m["a"].commit("notSigninProcessing")}),{scope:"email, public_profile",return_scopes:!0})}},mounted(){this.$refs.controlScroll.scrollIntoView({block:"end",inline:"nearest"}),this.getFacebookStatus()},computed:{...Object(p["b"])(["facebookConnect"])}},f=g,v=(n("8be4"),n("2877")),w=Object(v["a"])(f,r,c,!1,null,"27e147e0",null),C=w.exports,b=n("c496"),_={name:"Sign-up",components:{Navbar:a["a"],CartNavbar:e["a"],SignupForm:C,SigninSpiner:b["a"]},methods:{controlCartModel(){this.$store.commit("closeCartModel")}},computed:{...Object(p["b"])(["signinProcessing"])}},k=_,P=(n("1513"),Object(v["a"])(k,i,o,!1,null,"de9aa868",null));s["default"]=P.exports},3989:function(t,s,n){t.exports=n.p+"img/home-logo.e974c3d3.png"},4890:function(t,s,n){},"49e4":function(t,s,n){"use strict";n("df03")},"6d02":function(t,s,n){},"78c0":function(t,s,n){t.exports=n.p+"img/home-nav-icon-08.4ec03bbd.png"},"7b73":function(t,s,n){t.exports=n.p+"img/home-img-5.811a769a.png"},"8be4":function(t,s,n){"use strict";n("6d02")},"9ddc":function(t,s,n){"use strict";n("f8ca")},a19f:function(t,s,n){},a92a:function(t,s,n){t.exports=n.p+"img/vegetable-2.3f618944.png"},aa4e:function(t,s,n){t.exports=n.p+"img/vegetable-1.4d60799c.png"},ab0b:function(t,s,n){"use strict";var i=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"button"},[s("div",{attrs:{id:"google-sign-in-button"}})])}],a={name:"GoogleSignInButton",data(){return{}},props:{width:{type:String,default:null},height:{type:String,default:null}},mounted(){window.gapi.signin2.render("google-sign-in-button",{scope:"profile email",width:50,height:50,longtitle:!1,theme:"light",onsuccess:this.signIn,onfailure:()=>{}})},methods:{signIn(t){const s=t.getAuthResponse().id_token;this.$emit("sign-in",s)}}},e=a,r=(n("fe51"),n("2877")),c=Object(r["a"])(e,i,o,!1,null,"70c541fa",null);s["a"]=c.exports},af85:function(t,s,n){"use strict";n("4890")},bd13:function(t,s,n){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart-navbar"},[t.cartModel?s("CartListModal"):t._e(),s("div",{staticClass:"cart-navbar-shopping"},[0===t.checkOutStep?s("div",{staticClass:"icon cart-navbar-cart",attrs:{title:"購物車"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.showCardModel.apply(null,arguments)}}},[t.cart.shoppingCart.length>0?s("span",{staticClass:"cart-navbar-cart-notication"},[t._v(" "+t._s(t.cart.shoppingCart.length)+" ")]):t._e(),s("i",{staticClass:"fas fa-shopping-cart"}),s("h6",[t._v("購物車")])]):t._e(),s("router-link",{attrs:{to:{name:"Sign-in"}}},[t.isAuthenticated?t._e():s("div",{staticClass:"icon cart-navbar-login",attrs:{title:"登入"}},[s("i",{staticClass:"fas fa-sign-in-alt"}),s("h6",[t._v("登入")])])]),t.isAuthenticated?s("div",{staticClass:"icon cart-navbar-logout",attrs:{title:"登出"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.logOut.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-sign-out-alt"}),s("h6",[t._v("登出")])]):t._e()],1)],1)},o=[],a=(n("14d9"),function(){var t=this,s=t._self._c;return s("div",{staticClass:"cartList-modal"},[s("div",{staticClass:"cartList-modal-notication"},[s("h3",[t._v("購物車")]),s("div",{staticClass:"cartList-modal-notication-content"},[t._l(t.cart.shoppingCart,(function(n){return s("div",{key:n.id,staticClass:"cartList-modal-notication-content-item"},[s("div",{staticClass:"cartList-modal-notication-content-item-name"},[s("h4",[t._v(t._s(n.name))])]),s("div",{staticClass:"cartList-modal-notication-content-item-number"},[s("h4",[t._v(t._s(n.number)+"組")])]),s("div",{staticClass:"cartList-modal-notication-content-item-delete",class:{canNotDelete:t.cart.controlButton},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteItems(n)}}},[s("h6",[t._v("x")])])])})),t.isAuthenticated?s("div",{staticClass:"cartList-modal-notication-content-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.authenticatedCheckOut.apply(null,arguments)}}},[s("h4",[t._v("結帳")])]):t._e(),t.isAuthenticated?t._e():s("div",{staticClass:"cartList-modal-notication-content-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.unAuthenticatedCheckOut.apply(null,arguments)}}},[s("h4",[t._v("登入結帳")])])],2)])])}),e=[],r=n("2f62"),c=n("3d20"),l=n.n(c),u={computed:{...Object(r["b"])(["cart","isAuthenticated"])},methods:{async deleteItems(t){this.cart.controlButton||(this.isAuthenticated?this.$store.dispatch("deleteItem",t):localStorage.setItem("go_farmmy_products",JSON.stringify(this.cart.shoppingCart)))},authenticatedCheckOut(){this.$store.commit("closeCartModel"),0!==this.cart.shoppingCart.length?this.$router.push({name:"CheckOut-Products"}):this.notification()},unAuthenticatedCheckOut(){this.$store.commit("closeCartModel"),0!==this.cart.shoppingCart.length?this.$router.push({name:"CheckOut-Sign-in"}):this.notification()},notification(){l.a.fire({icon:"warning",title:"購物車內沒有商品！！",toast:!0,showConfirmButton:!1,timer:2e3})}}},d=u,m=(n("9ddc"),n("2877")),h=Object(m["a"])(d,a,e,!1,null,"37795228",null),p=h.exports,g={computed:{...Object(r["b"])(["cart","isAuthenticated","cartModel","checkOutStep"])},components:{CartListModal:p},data(){return{openCardModel:!1}},methods:{controlCartModel(){this.$store.commit("closeCartModel")},showCardModel(){this.cartModel?this.$store.commit("closeCartModel"):this.$store.commit("openCartModel")},async logOut(){if(this.$store.commit("closeCartModel"),this.cart.shoppingCart.length>0){const t=await l.a.fire({title:"購物車內尚有物品",text:"購物車內尚有物品，是否確認登出",icon:"warning",focusCancel:!0,showCancelButton:!0,confirmButtonColor:"#808080",cancelButtonColor:"#38301f",cancelButtonText:"取消登出",confirmButtonText:"確認登出"});if(!t.isConfirmed)return}try{await window.gapi.auth2.getAuthInstance().signOut(),console.log("Google User signed out."),this.$store.commit("logOut"),this.$router.push({name:"Sign-in"}),l.a.fire({icon:"success",title:"登出成功！",toast:!0,showConfirmButton:!1,timer:2e3})}catch(t){console.log(t),this.$store.commit("logOut"),this.$router.push({name:"Sign-in"})}}}},f=g,v=(n("af85"),Object(m["a"])(f,i,o,!1,null,"7cbef82e",null));s["a"]=v.exports},c496:function(t,s,n){"use strict";var i=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"loader-area"},[s("div",{staticClass:"loader-area-hightlight"},[s("div",{staticClass:"loader"}),s("h3",[t._v("資料確認中...")])])])}],a={props:{text:{require:!0}}},e=a,r=(n("49e4"),n("2877")),c=Object(r["a"])(e,i,o,!1,null,"24b5b075",null);s["a"]=c.exports},d0c7:function(t,s,n){t.exports=n.p+"img/home-nav-icon-09.99fe1612.png"},d178:function(t,s,n){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav",on:{click:t.controlCartModel}},[s("input",{staticClass:"navbar-toggle",attrs:{type:"checkbox",id:"navbar-toggle"}}),t._m(0),s("div",{staticClass:"phone-nav"},[s("div",{staticClass:"phone-nav-content"},[s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"About"}}},[s("img",{attrs:{src:n("78c0")}})]),s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"Product"}}},[s("img",{attrs:{src:n("d2d2")}})]),s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"Producer"}}},[s("img",{attrs:{src:n("d0c7")}})]),s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"User-Profile"}}},[s("img",{attrs:{src:n("1762")}})]),s("div",{staticClass:"phone-nav-logo"},[s("router-link",{attrs:{to:{name:"Home"}}},[s("img",{attrs:{src:n("3989")}})])],1)],1)]),s("div",{staticClass:"home-nav"},[s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"About"}}},[s("img",{attrs:{src:n("78c0")}})]),s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"Product"}}},[s("img",{attrs:{src:n("d2d2")}})]),s("div",{staticClass:"home-nav-logo"},[s("router-link",{attrs:{to:{name:"Home"}}},[s("img",{attrs:{src:n("3989")}})])],1),s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"Producer"}}},[s("img",{attrs:{src:n("d0c7")}})]),s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"User-Profile"}}},[s("img",{attrs:{src:n("1762")}})])],1)])},o=[function(){var t=this,s=t._self._c;return s("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"}},[s("span",{staticClass:"hamburger"},[s("i",{staticClass:"fas fa-bars"})])])}],a={methods:{controlCartModel(){this.$store.commit("closeCartModel")}}},e=a,r=(n("1235"),n("2877")),c=Object(r["a"])(e,i,o,!1,null,"c074e468",null);s["a"]=c.exports},d2d2:function(t,s,n){t.exports=n.p+"img/home-nav-icon-06.36196c25.png"},df03:function(t,s,n){},e746:function(t,s,n){},f0d3:function(t,s,n){t.exports=n.p+"img/sign-title-1.6cedef88.png"},f8ca:function(t,s,n){},fe51:function(t,s,n){"use strict";n("a19f")}}]);
//# sourceMappingURL=chunk-15dd1d9c.9f05d4d5.js.map