(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fb3d024"],{"008f":function(t,e,s){"use strict";s("40dc")},"0435":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user"},[e("Navbar"),e("CartNavbar"),e("div",{staticClass:"user-cover",on:{click:t.controlCartModel}},[e("img",{staticClass:"user-cover-title",attrs:{src:s("f271")}}),e("img",{staticClass:"user-cover-img",attrs:{src:s("7b73")}})]),e("div",{staticClass:"user-content",on:{click:t.controlCartModel}},[e("div",{staticClass:"user-content-nav"},[e("UserNavbar",{on:{detailPageFilter:t.productFilter}})],1),e("div",{staticClass:"user-content-items"},[e("UserOrderList")],1)])],1)},i=[],a=(s("14d9"),s("d178")),c=s("bd13"),o=s("d839"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"orderList"},[e("div",{staticClass:"orderList-welcome"},[e("div",{staticClass:"orderList-welcome-click"},[t.searchActive?e("div",{staticClass:"orderList-welcome-spinner",class:{searchActive:t.searchActive},on:{click:t.addListActive}},[e("i",{staticClass:"fas fa-clipboard-list"})]):t._e(),t.listActive||t.initial?e("div",{staticClass:"orderList-welcome-spinner",class:{listActive:t.listActive},on:{click:t.addSearchActive}},[e("i",{staticClass:"fas fa-search"})]):t._e()]),e("div",{staticClass:"orderList-welcome-text"},[t.searchActive?e("div",{class:{searchActiveText:t.searchActive}},[e("h2",[t._v("請輸入訂單編號")]),e("form",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{placeholder:"ex：3275",type:"number",required:""},domProps:{value:t.filterName},on:{input:function(e){e.target.composing||(t.filterName=e.target.value)}}}),e("button",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.filterOrder.apply(null,arguments)}}},[e("h4",[t._v("送出")])])])]):t._e(),t.listActive||t.initial?e("div",{class:{listActiveText:t.listActive}},[e("h2",[t._v(t._s(t.currentUser.name)+" 您好！")]),e("h4",[t._v(" 目前已經建立 "),e("span",{on:{click:t.showAllOrders}},[t._v(t._s(t.orders.length)+" ")]),t._v("筆訂單囉！ ")]),e("h4",[t._v(" 提醒您還有 "),e("span",{on:{click:t.showUnCompleteOrders}},[t._v(t._s(t.unCompleteOrder.length)+" ")]),t._v("筆訂單尚未訂購完成唷！ ")])]):t._e()])]),e("div",{staticClass:"orderList-list"},[t._l(t.showOrders,(function(s){return e("div",{key:s.id,staticClass:"orderList-list-card"},[e("div",{staticClass:"orderList-list-card-flex"},["1"===s.payment_status?e("div",{staticClass:"orderList-list-card-notice"},[t._v(" 已付款"),e("i",{staticClass:"fas fa-gift"})]):t._e(),"0"===s.payment_status?e("div",{staticClass:"orderList-list-card-notice2",on:{click:function(e){return t.gotoPay(s)}}},[t._v(" 未付款"),e("i",{staticClass:"far fa-credit-card"})]):t._e(),e("div",[e("h3",[t._v("訂單編號:"+t._s(s.id))]),e("h4",[t._v("訂單金額："+t._s(s.amount)+" 元")]),e("h4",[t._v("訂購日期："+t._s(t._f("newTime")(s.createdAt)))])])]),e("div",{staticClass:"orderList-list-card-button"},[e("button",{on:{click:function(e){return t.orderDetailPage(s.id)}}},[e("h4",[t._v("訂單詳情")])]),"0"===s.payment_status?e("button",{on:{click:function(e){return t.gotoPay(s)}}},[e("h4",[t._v("前往付款")])]):t._e()])])})),0===t.showOrders.length&&0!==t.orders.length?e("div",{staticClass:"orderList-list-none"},[e("h2",[t._v("查無此訂單")]),e("button",{on:{click:t.showAllOrders}},[t._v("返回列表")])]):t._e()],2)])},n=[],d=(s("d9e2"),s("2f62")),u=s("4cce"),h=s("c1df"),v=s.n(h),m={data(){return{initial:!0,searchActive:!1,listActive:!1,filterName:"",orders:[],unCompleteOrder:[],showOrders:[]}},filters:{newTime(t){return v()(t).format("YYYY-MM-DD")}},methods:{orderDetailPage(t){this.$router.push({name:"User-Order-Page",params:{id:t}})},addSearchActive(){this.listActive=!1,this.searchActive=!0,this.initial=!1},addListActive(){this.searchActive=!1,this.listActive=!0,this.initial=!1},async fetchOrder(){try{const{data:t}=await u["a"].getCurrentUser();if(this.orders=[...t.userOrders],this.unCompleteOrder=this.orders.filter(t=>"0"===t.payment_status),this.showOrders=this.orders,"error"===t.status)throw new Error(t.message);return!0}catch(t){console.log(t.message)}},showUnCompleteOrders(){0!==this.unCompleteOrder.length&&(this.showOrders=this.unCompleteOrder)},showAllOrders(){this.showOrders=this.orders},filterOrder(){this.showOrders=this.orders.filter(t=>t.id===Number(this.filterName)),this.filterName=""},async gotoPay(t){localStorage.setItem("go_farmmy_orderId",t.id),this.$router.push({name:"CheckOut-Payment"})}},computed:{...Object(d["b"])(["currentUser","cart"])},created(){this.fetchOrder()}},f=m,_=(s("ba3a"),s("2877")),p=Object(_["a"])(f,l,n,!1,null,"2fd32dc0",null),C=p.exports,w={name:"Member",components:{Navbar:a["a"],UserNavbar:o["a"],UserOrderList:C,CartNavbar:c["a"]},data(){return{item:{},showItems:[],filterName:""}},methods:{productFilter(){this.$router.push({name:"Product"})},controlCartModel(){this.$store.commit("closeCartModel")}}},b=w,O=(s("008f"),Object(_["a"])(b,r,i,!1,null,"76321b46",null));e["default"]=O.exports},"40dc":function(t,e,s){},ac0b:function(t,e,s){},ba3a:function(t,e,s){"use strict";s("ac0b")}}]);
//# sourceMappingURL=chunk-1fb3d024.def57d31.js.map