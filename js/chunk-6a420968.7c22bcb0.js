(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a420968"],{"11ee":function(t,s,o){"use strict";o("9245")},1235:function(t,s,o){"use strict";o("e746")},1762:function(t,s,o){t.exports=o.p+"img/home-nav-icon-07.5bd3c2ec.png"},3989:function(t,s,o){t.exports=o.p+"img/home-logo.e974c3d3.png"},4890:function(t,s,o){},"49e4":function(t,s,o){"use strict";o("df03")},"740a":function(t,s,o){"use strict";var n=function(){var t=this,s=t._self._c;return s("div",{ref:"controlScroll",staticClass:"signin-form",on:{"!scroll":function(s){return t.scrollChange.apply(null,arguments)},click:t.controlCartModel}},[t._m(0),t._m(1),s("form",{staticClass:"form"},[s("h2",[t._v("登入")]),s("div",{staticClass:"signin-form-content"},[s("div",{staticClass:"signin-form-content-email"},[t._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"signin-form-content-email-input",attrs:{placeholder:"請含有@、com等字元",id:"email",type:"email",autofocus:"",required:""},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value)}}})]),s("div",{staticClass:"signin-form-content-password"},[t._m(3),"checkbox"===t.showPassword?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"signin-form-content-password-input",attrs:{id:"password",autofocus:"",required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(s){var o=t.password,n=s.target,i=!!n.checked;if(Array.isArray(o)){var a=null,e=t._i(o,a);n.checked?e<0&&(t.password=o.concat([a])):e>-1&&(t.password=o.slice(0,e).concat(o.slice(e+1)))}else t.password=i}}}):"radio"===t.showPassword?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"signin-form-content-password-input",attrs:{id:"password",autofocus:"",required:"",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(s){t.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"signin-form-content-password-input",attrs:{id:"password",autofocus:"",required:"",type:t.showPassword},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),s("div",{staticClass:"signin-form-content-password-eye"},[t.showPassword?s("i",{staticClass:"fas fa-eye-slash",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.clickShowPassword.apply(null,arguments)}}}):s("i",{staticClass:"fas fa-eye",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.clickHidePassword.apply(null,arguments)}}})])]),s("div",{staticClass:"signin-form-content-buttonarea"},[s("div",{staticClass:"signin-form-content-signup",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.signUp.apply(null,arguments)}}},[s("h3",[t._v("註冊")])]),t.processing?s("div",{staticClass:"block signin-form-content-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.signIn.apply(null,arguments)}}},[s("h3",[t._v("登入中")])]):s("div",{staticClass:"signin-form-content-button",class:{block:!t.email||!t.password},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.signIn.apply(null,arguments)}}},[s("h3",[t._v("登入")])])]),s("div",{staticClass:"signin-form-content-fast"},[s("h3",[t._v("快速登入")]),s("div",{attrs:{id:"google-signin-button"}}),s("div",{staticClass:"signin-form-content-fast-icon"},[s("div",{staticClass:"fab"},[s("GoogleSignInButton",{on:{"sign-in":t.oAuthSignIn}})],1),s("i",{staticClass:"fab fa-facebook-f",attrs:{"data-onsuccess":"onSignIn"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.fbLogin.apply(null,arguments)}}})])])])])])},i=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"signin-form-img-1"},[s("img",{attrs:{src:o("aa4e")}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"signin-form-img-2"},[s("img",{attrs:{src:o("a92a")}})])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"signin-form-content-email-lebel",attrs:{for:"email"}},[s("h3",[t._v("Email")])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"signin-form-content-password-lebel",attrs:{for:"password"}},[s("h3",[t._v("密碼")])])}],a=(o("d9e2"),o("14d9"),o("4cce")),e=o("3d20"),r=o.n(e),c=o("4360"),l=o("2f62"),u=o("ab0b"),m={components:{GoogleSignInButton:u["a"]},data(){return{showPassword:"password",email:"",password:"",processing:!1,googleToken:""}},methods:{async oAuthSignIn(t){this.$store.commit("isSigninProcessing"),this.googleToken=t;try{const t=await a["a"].PostGoogleSignIn({token:this.googleToken}),{data:s}=t;if("success"!==s.status)throw new Error(s.message);r.a.fire({icon:"success",title:`歡迎 ${s.user.name}回來！`,toast:!0,showConfirmButton:!1,timer:3e3}),localStorage.setItem("gofarmmy_token",s.JWTtoken),this.$store.commit("setCurrentUser",s.user),this.$store.commit("notSigninProcessing"),"CheckOut-Sign-in"===this.$route.name?this.$router.push({name:"CheckOut-Products"}):this.$router.push({name:"Home"})}catch(s){console.error(s),r.a.fire({icon:"error",title:"登入錯誤，請洽客服",toast:!0,showConfirmButton:!1,timer:1500}),this.$store.commit("notSigninProcessing")}},controlCartModel(){this.$store.commit("closeCartModel")},clickShowPassword(){this.showPassword=""},clickHidePassword(){this.showPassword="password"},signUp(){this.$router.push({name:"Sign-up"})},async signIn(){this.$store.commit("closeCartModel");const t=await this.$store.dispatch("checkEmptyInput",[this.email,this.password]);if(t)return;const s=await this.$store.dispatch("checkEmail",this.email);if(!s)try{this.$store.commit("isSigninProcessing");const t=await a["a"].PostSignIn({email:this.email,password:this.password}),{data:s}=t;if("success"!==s.status)throw new Error(s.message);r.a.fire({icon:"success",title:`歡迎 ${s.user.name}回來！`,toast:!0,showConfirmButton:!1,timer:3e3}),localStorage.setItem("gofarmmy_token",s.token),this.$store.commit("setCurrentUser",s.user),this.$store.commit("notSigninProcessing"),"CheckOut-Sign-in"===this.$route.name?this.$router.push({name:"CheckOut-Products"}):this.$router.push({name:"Home"})}catch(o){this.password="",this.$store.commit("notSigninProcessing"),"User does not exist"===o.message?r.a.fire({icon:"warning",title:"此email尚未註冊",toast:!0,showConfirmButton:!1,timer:1500}):"Wrong password"===o.message?r.a.fire({icon:"warning",title:"密碼錯誤",toast:!0,showConfirmButton:!1,timer:1500}):r.a.fire({icon:"error",title:"登入錯誤，請洽客服",toast:!0,showConfirmButton:!1,timer:1500})}},getFacebookStatus(){window.FB.getLoginStatus(t=>{"connected"===t.status&&(console.log("已連接",t),c["a"].commit("changeFacebookConnect"))})},fbLogin(){this.$store.commit("isSigninProcessing"),this.facebookConnect?(console.log("有偵測到連結"),window.FB.api("/me",{fields:"name , email"},(async function(t){await c["a"].dispatch("fetchFbUser",t),c["a"].commit("notSigninProcessing")}))):window.FB.login((function(t){"connected"===t.status?window.FB.api("/me",{fields:"name , email"},(async function(t){await c["a"].dispatch("fetchFbUser",t),c["a"].commit("notSigninProcessing")})):c["a"].commit("notSigninProcessing")}),{scope:"email, public_profile",return_scopes:!0})}},computed:{...Object(l["b"])(["facebookConnect"])}},d=m,p=(o("11ee"),o("2877")),h=Object(p["a"])(d,n,i,!1,null,"3dbca215",null);s["a"]=h.exports},"78c0":function(t,s,o){t.exports=o.p+"img/home-nav-icon-08.4ec03bbd.png"},9245:function(t,s,o){},"9ddc":function(t,s,o){"use strict";o("f8ca")},a19f:function(t,s,o){},a92a:function(t,s,o){t.exports=o.p+"img/vegetable-2.3f618944.png"},aa4e:function(t,s,o){t.exports=o.p+"img/vegetable-1.4d60799c.png"},ab0b:function(t,s,o){"use strict";var n=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"button"},[s("div",{attrs:{id:"google-sign-in-button"}})])}],a={name:"GoogleSignInButton",data(){return{}},props:{width:{type:String,default:null},height:{type:String,default:null}},mounted(){window.gapi.signin2.render("google-sign-in-button",{scope:"profile email",width:50,height:50,longtitle:!1,theme:"light",onsuccess:this.signIn,onfailure:()=>{}})},methods:{signIn(t){const s=t.getAuthResponse().id_token;this.$emit("sign-in",s)}}},e=a,r=(o("fe51"),o("2877")),c=Object(r["a"])(e,n,i,!1,null,"70c541fa",null);s["a"]=c.exports},af85:function(t,s,o){"use strict";o("4890")},bd13:function(t,s,o){"use strict";var n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart-navbar"},[t.cartModel?s("CartListModal"):t._e(),s("div",{staticClass:"cart-navbar-shopping"},[0===t.checkOutStep?s("div",{staticClass:"icon cart-navbar-cart",attrs:{title:"購物車"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.showCardModel.apply(null,arguments)}}},[t.cart.shoppingCart.length>0?s("span",{staticClass:"cart-navbar-cart-notication"},[t._v(" "+t._s(t.cart.shoppingCart.length)+" ")]):t._e(),s("i",{staticClass:"fas fa-shopping-cart"}),s("h6",[t._v("購物車")])]):t._e(),s("router-link",{attrs:{to:{name:"Sign-in"}}},[t.isAuthenticated?t._e():s("div",{staticClass:"icon cart-navbar-login",attrs:{title:"登入"}},[s("i",{staticClass:"fas fa-sign-in-alt"}),s("h6",[t._v("登入")])])]),t.isAuthenticated?s("div",{staticClass:"icon cart-navbar-logout",attrs:{title:"登出"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.logOut.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-sign-out-alt"}),s("h6",[t._v("登出")])]):t._e()],1)],1)},i=[],a=(o("14d9"),function(){var t=this,s=t._self._c;return s("div",{staticClass:"cartList-modal"},[s("div",{staticClass:"cartList-modal-notication"},[s("h3",[t._v("購物車")]),s("div",{staticClass:"cartList-modal-notication-content"},[t._l(t.cart.shoppingCart,(function(o){return s("div",{key:o.id,staticClass:"cartList-modal-notication-content-item"},[s("div",{staticClass:"cartList-modal-notication-content-item-name"},[s("h4",[t._v(t._s(o.name))])]),s("div",{staticClass:"cartList-modal-notication-content-item-number"},[s("h4",[t._v(t._s(o.number)+"組")])]),s("div",{staticClass:"cartList-modal-notication-content-item-delete",class:{canNotDelete:t.cart.controlButton},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteItems(o)}}},[s("h6",[t._v("x")])])])})),t.isAuthenticated?s("div",{staticClass:"cartList-modal-notication-content-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.authenticatedCheckOut.apply(null,arguments)}}},[s("h4",[t._v("結帳")])]):t._e(),t.isAuthenticated?t._e():s("div",{staticClass:"cartList-modal-notication-content-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.unAuthenticatedCheckOut.apply(null,arguments)}}},[s("h4",[t._v("登入結帳")])])],2)])])}),e=[],r=o("2f62"),c=o("3d20"),l=o.n(c),u={computed:{...Object(r["b"])(["cart","isAuthenticated"])},methods:{async deleteItems(t){this.cart.controlButton||(this.isAuthenticated?this.$store.dispatch("deleteItem",t):localStorage.setItem("go_farmmy_products",JSON.stringify(this.cart.shoppingCart)))},authenticatedCheckOut(){this.$store.commit("closeCartModel"),0!==this.cart.shoppingCart.length?this.$router.push({name:"CheckOut-Products"}):this.notification()},unAuthenticatedCheckOut(){this.$store.commit("closeCartModel"),0!==this.cart.shoppingCart.length?this.$router.push({name:"CheckOut-Sign-in"}):this.notification()},notification(){l.a.fire({icon:"warning",title:"購物車內沒有商品！！",toast:!0,showConfirmButton:!1,timer:2e3})}}},m=u,d=(o("9ddc"),o("2877")),p=Object(d["a"])(m,a,e,!1,null,"37795228",null),h=p.exports,g={computed:{...Object(r["b"])(["cart","isAuthenticated","cartModel","checkOutStep"])},components:{CartListModal:h},data(){return{openCardModel:!1}},methods:{controlCartModel(){this.$store.commit("closeCartModel")},showCardModel(){this.cartModel?this.$store.commit("closeCartModel"):this.$store.commit("openCartModel")},async logOut(){if(this.$store.commit("closeCartModel"),this.cart.shoppingCart.length>0){const t=await l.a.fire({title:"購物車內尚有物品",text:"購物車內尚有物品，是否確認登出",icon:"warning",focusCancel:!0,showCancelButton:!0,confirmButtonColor:"#808080",cancelButtonColor:"#38301f",cancelButtonText:"取消登出",confirmButtonText:"確認登出"});if(!t.isConfirmed)return}try{await window.gapi.auth2.getAuthInstance().signOut(),console.log("Google User signed out."),this.$store.commit("logOut"),this.$router.push({name:"Sign-in"}),l.a.fire({icon:"success",title:"登出成功！",toast:!0,showConfirmButton:!1,timer:2e3})}catch(t){console.log(t),this.$store.commit("logOut"),this.$router.push({name:"Sign-in"})}}}},f=g,v=(o("af85"),Object(d["a"])(f,n,i,!1,null,"7cbef82e",null));s["a"]=v.exports},c496:function(t,s,o){"use strict";var n=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"loader-area"},[s("div",{staticClass:"loader-area-hightlight"},[s("div",{staticClass:"loader"}),s("h3",[t._v("資料確認中...")])])])}],a={props:{text:{require:!0}}},e=a,r=(o("49e4"),o("2877")),c=Object(r["a"])(e,n,i,!1,null,"24b5b075",null);s["a"]=c.exports},d0c7:function(t,s,o){t.exports=o.p+"img/home-nav-icon-09.99fe1612.png"},d178:function(t,s,o){"use strict";var n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav",on:{click:t.controlCartModel}},[s("input",{staticClass:"navbar-toggle",attrs:{type:"checkbox",id:"navbar-toggle"}}),t._m(0),s("div",{staticClass:"phone-nav"},[s("div",{staticClass:"phone-nav-content"},[s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"About"}}},[s("img",{attrs:{src:o("78c0")}})]),s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"Product"}}},[s("img",{attrs:{src:o("d2d2")}})]),s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"Producer"}}},[s("img",{attrs:{src:o("d0c7")}})]),s("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"User-Profile"}}},[s("img",{attrs:{src:o("1762")}})]),s("div",{staticClass:"phone-nav-logo"},[s("router-link",{attrs:{to:{name:"Home"}}},[s("img",{attrs:{src:o("3989")}})])],1)],1)]),s("div",{staticClass:"home-nav"},[s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"About"}}},[s("img",{attrs:{src:o("78c0")}})]),s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"Product"}}},[s("img",{attrs:{src:o("d2d2")}})]),s("div",{staticClass:"home-nav-logo"},[s("router-link",{attrs:{to:{name:"Home"}}},[s("img",{attrs:{src:o("3989")}})])],1),s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"Producer"}}},[s("img",{attrs:{src:o("d0c7")}})]),s("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"User-Profile"}}},[s("img",{attrs:{src:o("1762")}})])],1)])},i=[function(){var t=this,s=t._self._c;return s("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"}},[s("span",{staticClass:"hamburger"},[s("i",{staticClass:"fas fa-bars"})])])}],a={methods:{controlCartModel(){this.$store.commit("closeCartModel")}}},e=a,r=(o("1235"),o("2877")),c=Object(r["a"])(e,n,i,!1,null,"c074e468",null);s["a"]=c.exports},d2d2:function(t,s,o){t.exports=o.p+"img/home-nav-icon-06.36196c25.png"},df03:function(t,s,o){},e746:function(t,s,o){},f0d3:function(t,s,o){t.exports=o.p+"img/sign-title-1.6cedef88.png"},f8ca:function(t,s,o){},fe51:function(t,s,o){"use strict";o("a19f")}}]);
//# sourceMappingURL=chunk-6a420968.7c22bcb0.js.map