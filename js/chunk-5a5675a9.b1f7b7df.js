(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a5675a9"],{1235:function(t,e,i){"use strict";i("e746")},1762:function(t,e,i){t.exports=i.p+"img/home-nav-icon-07.5bd3c2ec.png"},2708:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));const a={filters:{descriptionLength(t){return t.length>80?t.substr(0,80)+"...":t}}}},3989:function(t,e,i){t.exports=i.p+"img/home-logo.e974c3d3.png"},4434:function(t,e,i){"use strict";i("b42a")},4652:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-nav"},[e("div",{staticClass:"product-content-nav-search"},[e("div",[e("i",{staticClass:"fas fa-search",on:{click:t.filterItem}})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{placeholder:"商品搜尋！ex：火龍果！",type:"text",required:""},domProps:{value:t.filterName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)},input:function(e){e.target.composing||(t.filterName=e.target.value)}}})]),e("div",{staticClass:"product-content-nav-category"},[e("h2",[t._v("商品分類")]),e("div",{staticClass:"product-content-nav-category-name",on:{click:t.refresh}},[e("router-link",{staticClass:"product-content-nav-category-link",attrs:{to:{name:"Product"}}},[e("h3",[t._v("全部")])]),e("router-link",{staticClass:"product-content-nav-category-link",attrs:{to:{name:"Product",query:{categoryId:1}}}},[e("h3",[t._v("果物")])]),e("router-link",{staticClass:"product-content-nav-category-link",attrs:{to:{name:"Product",query:{categoryId:11}}}},[e("h3",[t._v("蔬菜")])])],1)])])},s=[],n={data(){return{filterName:""}},methods:{refresh(){this.$emit("refresh")},filterItem(){this.$store.commit("addFilterKeyword",this.filterName),this.$emit("listPageFilter"),this.$emit("detailPageFilter"),this.filterName=""}}},r=n,c=(i("c826"),i("2877")),o=Object(c["a"])(r,a,s,!1,null,"0ca015e5",null);e["a"]=o.exports},4890:function(t,e,i){},"5f47":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product"},[e("Navbar"),e("CartNavbar"),e("div",{staticClass:"product-cover",on:{click:t.controlCartModel}},[e("img",{staticClass:"product-cover-title",attrs:{src:i("bc80")}}),e("img",{staticClass:"product-cover-img",attrs:{src:i("b220")}})]),e("div",{staticClass:"product-content",on:{click:t.controlCartModel}},[e("div",{staticClass:"product-content-nav"},[e("ProductNavbar",{on:{detailPageFilter:t.productFilter}})],1),e("div",{staticClass:"product-content-items"},[e("h2",{staticClass:"title"},[t._v("商品介紹")]),e("ProductSingle",{attrs:{item:this.item,proccessing:t.proccessing}})],1)])],1)},s=[],n=(i("14d9"),i("d178")),r=i("bd13"),c=function(){var t=this,e=t._self._c;return e("div",[t.proccessing?e("div",[e("Spiner")],1):t._e(),t.proccessing?t._e():e("div",{staticClass:"product-items"},[e("h2",{staticClass:"title"},[e("div",[t._v("季節特選。來自"+t._s(t.item.origin)+"的鮮採"+t._s(t.item.name)+"！")])]),t.proccessing?t._e():e("div",{staticClass:"product-content-items-card"},[e("div",{staticClass:"product-content-items-card-img"},[t.item.quantity>0?e("div",{staticClass:"product-content-items-card-img-number"},[e("h5",[t._v("限量"+t._s(t.item.quantity)+"組")])]):t._e(),0===t.item.quantity?e("div",{staticClass:"product-content-items-card-img-number"},[e("h5",[t._v("已售完")])]):t._e(),e("img",{attrs:{src:t.item.image}})]),e("div",{staticClass:"product-content-items-card-text"},[e("h1",[t._v(t._s(t.item.name)+" | "+t._s(t.item.origin))]),e("div",{staticClass:"product-content-items-card-panel"},[e("div",{staticClass:"product-content-items-card-panel-number"},[e("button",{staticClass:"product-content-items-card-panel-number-icon",attrs:{disabled:Number(t.item.number)>=t.item.quantity},on:{click:function(e){return t.addNumber(t.item)}}},[t._v(" + ")]),e("button",{staticClass:"product-content-items-card-panel-number-icon",attrs:{disabled:Number(t.item.number)<=1},on:{click:function(e){return t.deleteNumber(t.item)}}},[t._v(" - ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.number,expression:"item.number"}],staticClass:"product-content-items-card-panel-number-input",attrs:{id:"number",type:"number",max:t.item.number,required:""},domProps:{value:t.item.number},on:{change:function(e){return t.changeNumber(t.item)},input:function(e){e.target.composing||t.$set(t.item,"number",e.target.value)}}}),e("span",[t._v("組")])]),e("button",{staticClass:"product-content-items-card-panel-button",attrs:{disabled:t.item.number>t.item.quantity||Number(t.item.number)<=0||!Number.isInteger(Number(t.item.number))||0===t.item.quantity},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addItemsTOcard(t.item)}}},[t._v(" 加入 ")]),t.item.number>t.item.quantity&&0!==t.item.quantity?e("div",{staticClass:"product-content-items-card-warm"},[t._v(" 上限 "+t._s(t.item.quantity)+" 組 ")]):t._e()]),e("div",{staticClass:"product-content-items-card-price"},[t._m(0),e("p",{staticClass:"price-focus"},[t._v(t._s(t.item.price)+"元/箱")])]),e("div",{staticClass:"product-content-items-card-specification"},[t._m(1),e("p",[t._v(t._s(t.item.specification))])]),e("div",{staticClass:"product-content-items-card-specification"},[t._m(2),e("p",[t._v(t._s(t.item.storage_method))])]),e("div",{staticClass:"product-content-items-card-description"},[e("h4",[t._v(" "+t._s(t.item.description)+" ")])])]),!Number.isInteger(Number(t.item.number))||Number(t.item.number)<0||"0"===t.item.number&&0!==t.item.quantity?e("div",{staticClass:"product-content-items-card-warm"},[t._v(" 請輸入有效數量 ")]):t._e()])])])},o=[function(){var t=this,e=t._self._c;return e("h2",[e("i",{staticClass:"fas fa-comment-dollar"}),t._v(" 價格：")])},function(){var t=this,e=t._self._c;return e("h2",[e("i",{staticClass:"fas fa-tag"}),t._v(" 規格：")])},function(){var t=this,e=t._self._c;return e("h2",[e("i",{staticClass:"fas fa-archive"}),t._v(" 保存方法：")])}],u=i("2708"),l=i("2f62"),d=i("cc17"),m=i("3d20"),p=i.n(m),h=function(){var t=this;t._self._c;return t._m(0)},v=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-spiner"},[e("div",{staticClass:"title"},[e("div")]),e("div",{staticClass:"product-spiner-items-card"},[e("div",{staticClass:"product-spiner-items-card-img"},[e("div")]),e("div",{staticClass:"product-spiner-items-card-text"},[e("h1",[e("div")]),e("div",{staticClass:"product-spiner-items-card-panel"},[e("div")]),e("div",{staticClass:"product-spiner-items-card-price"},[e("div")]),e("div",{staticClass:"product-spiner-items-card-specification"},[e("div")]),e("div",{staticClass:"product-spiner-items-card-specification"},[e("div")]),e("div",{staticClass:"product-spiner-items-card-description"},[e("div")])])])])}],f=(i("a222"),i("2877")),g={},C=Object(f["a"])(g,h,v,!1,null,"23f1d4d9",null),b=C.exports,_={components:{Spiner:b},props:{item:{require:!0},proccessing:{require:!0}},mixins:[u["a"]],data(){return{items:this.initialItems,productLimit:!1}},methods:{addNumber(t){Number(t.number)>=t.quantity||(t.number=Number(t.number)+1)},deleteNumber(t){Number(t.number)<=1||(t.number=Number(t.number)-1)},changeNumber(t){""===t.number&&(t.number=1)},addItemsTOcard(t){const e=this.cart.shoppingCart.findIndex(e=>e.id===t.id);if(0!==t.quantity)if(Number(t.number)<=0||!Number.isInteger(Number(t.number)))p.a.fire({icon:"warning",title:"請輸入有效數量",toast:!0,showConfirmButton:!1,timer:1e3});else{if(-1!==e){let i=this.cart.shoppingCart[e].number;if(Number(i)+Number(t.number)>t.quantity)return void p.a.fire({icon:"warning",title:`已達${t.name}購買上限數量！`,toast:!0,showConfirmButton:!1,timer:1e3})}this.isAuthenticated?this.addisAuthenticated(t):(this.$store.commit("addProductinCart",t),localStorage.setItem("go_farmmy_products",JSON.stringify(this.cart.shoppingCart)),p.a.fire({icon:"success",title:`${t.number}組${t.name} 已加入購物車！`,toast:!0,showConfirmButton:!1,timer:1e3}),t.number=1)}else p.a.fire({icon:"warning",title:"商品已完售",toast:!0,showConfirmButton:!1,timer:1e3})},async addisAuthenticated(t){this.$store.commit("closeCartModel");try{await d["a"].postCart({productId:t.id,quantity:t.number}),p.a.fire({icon:"success",title:`${t.number}組${t.name} 已加入購物車！`,toast:!0,showConfirmButton:!1,timer:1e3}),this.$store.dispatch("fetchSoppingCard"),t.number=1}catch(e){p.a.fire({icon:"error",title:"購物車發生錯誤，請稍後再試",toast:!0,showConfirmButton:!1,timer:1e3})}}},computed:{...Object(l["b"])(["isAuthenticated","cart"])}},y=_,k=(i("8140"),Object(f["a"])(y,c,o,!1,null,"15d99b80",null)),N=k.exports,w=i("4652"),P=i("ee21"),$={name:"Product-Detail",components:{Navbar:n["a"],CartNavbar:r["a"],ProductSingle:N,ProductNavbar:w["a"]},data(){return{item:{},showItems:[],filterName:"",proccessing:!0}},methods:{productFilter(){this.$router.push({name:"Product"})},controlCartModel(){this.$store.commit("closeCartModel")},async fetchData(t){try{var e;const i=await P["a"].getProduct({id:t});this.item={...null===(e=i.data)||void 0===e?void 0:e.product},this.proccessing=!1}catch(i){p.a.fire({icon:"error",title:"商品載入錯誤，請稍後再試",toast:!0,showConfirmButton:!1,timer:3e3})}}},created(){const t=this.$route.params.id;this.fetchData(t)},beforeRouteUpdate(t,e,i){const{id:a}=t.params;this.fetchData(a),i()}},x=$,O=(i("4434"),Object(f["a"])(x,a,s,!1,null,"c84a1da8",null));e["default"]=O.exports},"668f":function(t,e,i){},"78c0":function(t,e,i){t.exports=i.p+"img/home-nav-icon-08.4ec03bbd.png"},8140:function(t,e,i){"use strict";i("668f")},"931a":function(t,e,i){},"9ddc":function(t,e,i){"use strict";i("f8ca")},a222:function(t,e,i){"use strict";i("931a")},af85:function(t,e,i){"use strict";i("4890")},b220:function(t,e,i){t.exports=i.p+"img/about-img-2.8323a43c.png"},b42a:function(t,e,i){},bc80:function(t,e,i){t.exports=i.p+"img/product-icon-1.9b3d19ad.png"},bd13:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cart-navbar"},[t.cartModel?e("CartListModal"):t._e(),e("div",{staticClass:"cart-navbar-shopping"},[0===t.checkOutStep?e("div",{staticClass:"icon cart-navbar-cart",attrs:{title:"購物車"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showCardModel.apply(null,arguments)}}},[t.cart.shoppingCart.length>0?e("span",{staticClass:"cart-navbar-cart-notication"},[t._v(" "+t._s(t.cart.shoppingCart.length)+" ")]):t._e(),e("i",{staticClass:"fas fa-shopping-cart"}),e("h6",[t._v("購物車")])]):t._e(),e("router-link",{attrs:{to:{name:"Sign-in"}}},[t.isAuthenticated?t._e():e("div",{staticClass:"icon cart-navbar-login",attrs:{title:"登入"}},[e("i",{staticClass:"fas fa-sign-in-alt"}),e("h6",[t._v("登入")])])]),t.isAuthenticated?e("div",{staticClass:"icon cart-navbar-logout",attrs:{title:"登出"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.logOut.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-sign-out-alt"}),e("h6",[t._v("登出")])]):t._e()],1)],1)},s=[],n=(i("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"cartList-modal"},[e("div",{staticClass:"cartList-modal-notication"},[e("h3",[t._v("購物車")]),e("div",{staticClass:"cartList-modal-notication-content"},[t._l(t.cart.shoppingCart,(function(i){return e("div",{key:i.id,staticClass:"cartList-modal-notication-content-item"},[e("div",{staticClass:"cartList-modal-notication-content-item-name"},[e("h4",[t._v(t._s(i.name))])]),e("div",{staticClass:"cartList-modal-notication-content-item-number"},[e("h4",[t._v(t._s(i.number)+"組")])]),e("div",{staticClass:"cartList-modal-notication-content-item-delete",class:{canNotDelete:t.cart.controlButton},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteItems(i)}}},[e("h6",[t._v("x")])])])})),t.isAuthenticated?e("div",{staticClass:"cartList-modal-notication-content-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.authenticatedCheckOut.apply(null,arguments)}}},[e("h4",[t._v("結帳")])]):t._e(),t.isAuthenticated?t._e():e("div",{staticClass:"cartList-modal-notication-content-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.unAuthenticatedCheckOut.apply(null,arguments)}}},[e("h4",[t._v("登入結帳")])])],2)])])}),r=[],c=i("2f62"),o=i("3d20"),u=i.n(o),l={computed:{...Object(c["b"])(["cart","isAuthenticated"])},methods:{async deleteItems(t){this.cart.controlButton||(this.isAuthenticated?this.$store.dispatch("deleteItem",t):localStorage.setItem("go_farmmy_products",JSON.stringify(this.cart.shoppingCart)))},authenticatedCheckOut(){this.$store.commit("closeCartModel"),0!==this.cart.shoppingCart.length?this.$router.push({name:"CheckOut-Products"}):this.notification()},unAuthenticatedCheckOut(){this.$store.commit("closeCartModel"),0!==this.cart.shoppingCart.length?this.$router.push({name:"CheckOut-Sign-in"}):this.notification()},notification(){u.a.fire({icon:"warning",title:"購物車內沒有商品！！",toast:!0,showConfirmButton:!1,timer:2e3})}}},d=l,m=(i("9ddc"),i("2877")),p=Object(m["a"])(d,n,r,!1,null,"37795228",null),h=p.exports,v={computed:{...Object(c["b"])(["cart","isAuthenticated","cartModel","checkOutStep"])},components:{CartListModal:h},data(){return{openCardModel:!1}},methods:{controlCartModel(){this.$store.commit("closeCartModel")},showCardModel(){this.cartModel?this.$store.commit("closeCartModel"):this.$store.commit("openCartModel")},async logOut(){if(this.$store.commit("closeCartModel"),this.cart.shoppingCart.length>0){const t=await u.a.fire({title:"購物車內尚有物品",text:"購物車內尚有物品，是否確認登出",icon:"warning",focusCancel:!0,showCancelButton:!0,confirmButtonColor:"#808080",cancelButtonColor:"#38301f",cancelButtonText:"取消登出",confirmButtonText:"確認登出"});if(!t.isConfirmed)return}try{await window.gapi.auth2.getAuthInstance().signOut(),console.log("Google User signed out."),this.$store.commit("logOut"),this.$router.push({name:"Sign-in"}),u.a.fire({icon:"success",title:"登出成功！",toast:!0,showConfirmButton:!1,timer:2e3})}catch(t){console.log(t),this.$store.commit("logOut"),this.$router.push({name:"Sign-in"})}}}},f=v,g=(i("af85"),Object(m["a"])(f,a,s,!1,null,"7cbef82e",null));e["a"]=g.exports},c465:function(t,e,i){},c826:function(t,e,i){"use strict";i("c465")},d0c7:function(t,e,i){t.exports=i.p+"img/home-nav-icon-09.99fe1612.png"},d178:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav",on:{click:t.controlCartModel}},[e("input",{staticClass:"navbar-toggle",attrs:{type:"checkbox",id:"navbar-toggle"}}),t._m(0),e("div",{staticClass:"phone-nav"},[e("div",{staticClass:"phone-nav-content"},[e("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"About"}}},[e("img",{attrs:{src:i("78c0")}})]),e("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"Product"}}},[e("img",{attrs:{src:i("d2d2")}})]),e("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"Producer"}}},[e("img",{attrs:{src:i("d0c7")}})]),e("router-link",{staticClass:"phone-nav-icon",attrs:{to:{name:"User-Profile"}}},[e("img",{attrs:{src:i("1762")}})]),e("div",{staticClass:"phone-nav-logo"},[e("router-link",{attrs:{to:{name:"Home"}}},[e("img",{attrs:{src:i("3989")}})])],1)],1)]),e("div",{staticClass:"home-nav"},[e("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"About"}}},[e("img",{attrs:{src:i("78c0")}})]),e("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"Product"}}},[e("img",{attrs:{src:i("d2d2")}})]),e("div",{staticClass:"home-nav-logo"},[e("router-link",{attrs:{to:{name:"Home"}}},[e("img",{attrs:{src:i("3989")}})])],1),e("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"Producer"}}},[e("img",{attrs:{src:i("d0c7")}})]),e("router-link",{staticClass:"home-nav-icon",attrs:{to:{name:"User-Profile"}}},[e("img",{attrs:{src:i("1762")}})])],1)])},s=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"}},[e("span",{staticClass:"hamburger"},[e("i",{staticClass:"fas fa-bars"})])])}],n={methods:{controlCartModel(){this.$store.commit("closeCartModel")}}},r=n,c=(i("1235"),i("2877")),o=Object(c["a"])(r,a,s,!1,null,"c074e468",null);e["a"]=o.exports},d2d2:function(t,e,i){t.exports=i.p+"img/home-nav-icon-06.36196c25.png"},e746:function(t,e,i){},ee21:function(t,e,i){"use strict";var a=i("2fa3");e["a"]={getProducts({categoryId:t}){const e=new URLSearchParams({categoryId:t});return a["a"].get("/products?"+e.toString())},getProduct({id:t}){return a["a"].get("/products/"+t)}}},f8ca:function(t,e,i){}}]);
//# sourceMappingURL=chunk-5a5675a9.b1f7b7df.js.map